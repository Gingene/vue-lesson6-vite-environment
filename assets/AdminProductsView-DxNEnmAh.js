import{d as le,h as te,a2 as ae,i as se,j as C,k as D,l as j,ay as A,a as _,x as q,w as t,b as l,g as e,az as oe,A as Z,q as ee,aA as de,aB as re,m as ne,aC as ie,aD as ue,s as ce,o as pe,r as L,c as v,e as d,f as o,al as u,F as w,t as I,v as b,ax as T,aE as _e,aF as me,X as fe,J as ge,U as ve}from"./index-CC4RKYpw.js";import{_ as ye,a as be,b as E,c as P,d as Ve,e as B,f as xe}from"./TableCaption-DaloYS5R.js";import{_ as J,a as X,b as H,c as O,d as R,e as G,f as K,g as Q}from"./DialogFooter-Dfj9J9EH.js";import{_ as he,a as $e,b as Ue,c as ke,d as Ce,e as we,f as Pe,g as Be,h as qe}from"./AlertDialogCancel-CDsFeR-3.js";import{_ as Se,a as je,b as Ae,c as Ie,d as Me}from"./PaginationPrev-DXoxa_6T.js";import{_ as M}from"./Textarea-CAA467if.js";import"./chevrons-right-ZywXGKGg.js";/**
 * @license lucide-vue-next v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=le("PlusCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),{setIsLoading:h}=te(),{toast:z}=ae(),W=se("adminProduct",()=>{const g=C([]),p=C({title:"",category:"",unit:"",origin_price:"",price:"",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[""]}),V=C({}),y=C({}),f=C(""),$=async(i=1)=>{h(),console.log(i);const{data:x}=await j.get(`${A.products}/?page=${i}`);g.value=x.products,V.value=x.pagination,y.value=Object.groupBy(x.products,({category:r})=>r),h()},k=()=>{p.value={title:"",category:"",unit:"",origin_price:"",price:"",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[""]}},N=async()=>{h();const i=document.querySelector(".closeButton");await j.post(`${A.product}`,{data:p.value}),z({title:"產品已登錄",description:""}),k(),$(),h(),i.click()},U=i=>{p.value={...i}},a=async i=>{h();const x=document.querySelector(".closeButton");await j.put(`${A.product}/${i}`,{data:p.value}),z({title:"產品已修改",description:""}),k(),$(),h(),x.click()},F=async i=>{h(),console.log(i),await j.delete(`${A.product}/${i}`),z({title:"產品已刪除",description:""}),$(),h()},s=i=>{f.value=i},m=D(()=>f.value===""?g.value:g.value.filter(({category:i})=>i===f.value));return{products:g,tempProduct:p,pagination:V,categories:y,filterCondition:f,filterProducts:m,getProducts:$,resetProduct:k,postProduct:N,editProduct:U,putProduct:a,deleteProduct:F,changeFilterCondition:s}}),ze={__name:"ScrollBar",props:{orientation:{type:String,required:!1,default:"vertical"},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(g){const p=g,V=D(()=>{const{class:y,...f}=p;return f});return(y,f)=>(_(),q(e(de),Z(V.value,{class:e(ee)("flex touch-none select-none transition-colors",g.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",g.orientation==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-px",p.class)}),{default:t(()=>[l(e(oe),{class:"relative flex-1 rounded-full bg-border"})]),_:1},16,["class"]))}},Y={__name:"ScrollArea",props:{type:{type:String,required:!1},dir:{type:String,required:!1},scrollHideDelay:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(g){const p=g,V=D(()=>{const{class:y,...f}=p;return f});return(y,f)=>(_(),q(e(ue),Z(V.value,{class:e(ee)("relative overflow-hidden",p.class)}),{default:t(()=>[l(e(re),{class:"h-full w-full rounded-[inherit]"},{default:t(()=>[ne(y.$slots,"default")]),_:3}),l(ze),l(e(ie))]),_:3},16,["class"]))}},De={class:"container py-20 lg:py-32"},Fe={class:"text-end"},Le=d("span",{class:"ms-2"},"新增產品",-1),Te={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ee={class:"space-y-10"},Je={class:"space-y-4"},Xe=["src"],He=d("h3",{class:"mb-4"},"新增多圖",-1),Oe=["src"],Re={key:0},Ge={class:"grid grid-cols-2 gap-6"},Ke={class:"col-span-2 space-y-4"},Qe={class:"space-y-4"},We={class:"space-y-4"},Ye={class:"space-y-4"},Ze={class:"space-y-4"},el={class:"space-y-4 col-span-2 border-t-2 border-foreground pt-10"},ll={class:"space-y-4 col-span-2"},tl={class:"flex"},al={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},sl={class:"space-y-10"},ol={class:"space-y-4"},dl=["src"],rl=d("h3",{class:"mb-4"},"新增多圖",-1),nl=["src"],il={key:0},ul={class:"grid grid-cols-2 gap-6"},cl={class:"col-span-2 space-y-4"},pl={class:"space-y-4"},_l={class:"space-y-4"},ml={class:"space-y-4"},fl={class:"space-y-4"},gl={class:"space-y-4 col-span-2 border-t-2 border-foreground pt-10"},vl={class:"space-y-4 col-span-2"},yl={class:"flex"},bl={class:"flex justify-center my-6 lg:my-10"},Pl={__name:"AdminProductsView",setup(g){const{getProducts:p,resetProduct:V,postProduct:y,editProduct:f,putProduct:$,deleteProduct:k}=W(),{filterProducts:N,pagination:U,tempProduct:a}=ce(W());return pe(()=>{p()}),(F,s)=>{var x;const m=L("Button"),i=L("Input");return _(),v("section",De,[d("div",Fe,[l(e(Q),null,{default:t(()=>[l(e(J),null,{default:t(()=>[l(m,{variant:"outline-primary",onClick:e(V)},{default:t(()=>[l(e(Ne)),Le]),_:1},8,["onClick"])]),_:1}),l(e(X),{class:"lg:max-w-4xl xl:max-w-5xl 2xl:max-w-7xl bg-secondary"},{default:t(()=>[l(e(H),null,{default:t(()=>[l(e(O),{class:"text-xl"},{default:t(()=>[o("新增產品")]),_:1}),l(e(R))]),_:1}),l(e(Y),{class:"border h-[500px] lg:h-[800px] p-4"},{default:t(()=>[d("form",null,[d("div",Te,[d("div",Ee,[d("div",Je,[l(e(u),{class:"text-base",for:"main-product"},{default:t(()=>[o("主要圖片")]),_:1}),l(i,{id:"main-product",modelValue:e(a).imageUrl,"onUpdate:modelValue":s[0]||(s[0]=r=>e(a).imageUrl=r),placeholder:"請輸入圖片"},null,8,["modelValue"]),d("img",{class:"object-cover",src:e(a).imageUrl,alt:""},null,8,Xe)]),(_(!0),v(w,null,I(e(a).imagesUrl,(r,n)=>(_(),v("div",{key:n,class:"space-y-4"},[He,l(e(u),{for:"product-image"+(n+1)},{default:t(()=>[o("圖片網址"+b(n+1),1)]),_:2},1032,["for"]),l(i,{id:"product-image"+(n+1),modelValue:e(a).imagesUrl[n],"onUpdate:modelValue":c=>e(a).imagesUrl[n]=c,placeholder:"請輸入圖片"},null,8,["id","modelValue","onUpdate:modelValue"]),d("img",{class:"object-cover",src:e(a).imagesUrl[n],alt:""},null,8,Oe)]))),128)),e(a).imagesUrl[e(a).imagesUrl.length-1]!==""?(_(),v("div",Re,[l(m,{variant:"outline-primary",onClick:s[1]||(s[1]=r=>e(a).imagesUrl.push(""))},{default:t(()=>[o(" 新增圖片 ")]),_:1})])):T("",!0),d("div",null,[l(m,{variant:"destructive",class:"w-full",onClick:s[2]||(s[2]=r=>e(a).imagesUrl.pop())},{default:t(()=>[o(" 刪除圖片 ")]),_:1})])]),d("div",Ge,[d("div",Ke,[l(e(u),{class:"text-base",for:"product-title"},{default:t(()=>[o("標題")]),_:1}),l(i,{id:"product-title",modelValue:e(a).title,"onUpdate:modelValue":s[3]||(s[3]=r=>e(a).title=r),placeholder:"請輸入標題"},null,8,["modelValue"])]),d("div",Qe,[l(e(u),{class:"text-base",for:"product-category"},{default:t(()=>[o("分類")]),_:1}),l(i,{id:"product-category",modelValue:e(a).category,"onUpdate:modelValue":s[4]||(s[4]=r=>e(a).category=r),placeholder:"請輸入分類"},null,8,["modelValue"])]),d("div",We,[l(e(u),{class:"text-base",for:"product-unit"},{default:t(()=>[o("單位")]),_:1}),l(i,{id:"product-unit",modelValue:e(a).unit,"onUpdate:modelValue":s[5]||(s[5]=r=>e(a).unit=r),placeholder:"請輸入單位"},null,8,["modelValue"])]),d("div",Ye,[l(e(u),{class:"text-base",for:"product-origin-price"},{default:t(()=>[o("原價")]),_:1}),l(i,{id:"product-origin-price",type:"number",modelValue:e(a).origin_price,"onUpdate:modelValue":s[6]||(s[6]=r=>e(a).origin_price=r),placeholder:"請輸入原價"},null,8,["modelValue"])]),d("div",Ze,[l(e(u),{class:"text-base",for:"product-price"},{default:t(()=>[o("價格")]),_:1}),l(i,{id:"product-price",type:"number",modelValue:e(a).price,"onUpdate:modelValue":s[7]||(s[7]=r=>e(a).price=r),placeholder:"請輸入售價"},null,8,["modelValue"])]),d("div",el,[l(e(u),{class:"text-base",for:"product-description"},{default:t(()=>[o("產品描述")]),_:1}),l(e(M),{id:"product-description",modelValue:e(a).description,"onUpdate:modelValue":s[8]||(s[8]=r=>e(a).description=r),placeholder:"請輸入產品描述"},null,8,["modelValue"])]),d("div",ll,[l(e(u),{class:"text-base",for:"product-content"},{default:t(()=>[o("說明內容")]),_:1}),l(e(M),{id:"product-content",modelValue:e(a).content,"onUpdate:modelValue":s[9]||(s[9]=r=>e(a).content=r),placeholder:"請輸入產品說明內容"},null,8,["modelValue"])]),d("div",tl,[l(i,{id:"product-enabled",type:"checkbox",class:"size-6 me-2",modelValue:e(a).is_enabled,"onUpdate:modelValue":s[10]||(s[10]=r=>e(a).is_enabled=r),"true-value":1,"false-value":0},null,8,["modelValue"]),l(e(u),{class:"text-base",for:"product-enabled"},{default:t(()=>[o("是否啟用")]),_:1})])]),l(e(G),{class:"lg:col-start-2"},{default:t(()=>[l(e(K),{"as-child":""},{default:t(()=>[l(m,{type:"button",class:"border-lime-700 border bg-transparent text-foreground hover:bg-lime-500 closeButton"},{default:t(()=>[o("取消")]),_:1})]),_:1}),l(m,{type:"button",variant:"outline-primary",onClick:e(y)},{default:t(()=>[o("確認")]),_:1},8,["onClick"])]),_:1})])])]),_:1})]),_:1})]),_:1})]),l(e(xe),null,{default:t(()=>[l(e(ye),null,{default:t(()=>[o("產品列表")]),_:1}),l(e(be),null,{default:t(()=>[l(e(E),null,{default:t(()=>[l(e(P),{class:"w-[100px]"},{default:t(()=>[o(" 分類 ")]),_:1}),l(e(P),null,{default:t(()=>[o("商品名稱")]),_:1}),l(e(P),null,{default:t(()=>[o("原價 / 售價")]),_:1}),l(e(P),null,{default:t(()=>[o("是否啟用")]),_:1}),l(e(P),{class:"text-right"},{default:t(()=>[o(" 編輯 ")]),_:1})]),_:1})]),_:1}),l(e(Ve),null,{default:t(()=>[(_(!0),v(w,null,I(e(N),r=>(_(),q(e(E),{key:r.id},{default:t(()=>[l(e(B),{class:"font-medium"},{default:t(()=>[o(b(r.category),1)]),_:2},1024),l(e(B),null,{default:t(()=>[o(b(r.title),1)]),_:2},1024),l(e(B),null,{default:t(()=>[o(b(r.origin_price)+" / "+b(r.price),1)]),_:2},1024),l(e(B),null,{default:t(()=>[o(b(r.is_enabled===1?"是":"否"),1)]),_:2},1024),l(e(B),{class:"text-right space-x-2"},{default:t(()=>[l(e(Q),null,{default:t(()=>[l(e(J),null,{default:t(()=>[l(m,{variant:"outline-primary",onClick:n=>e(f)(r)},{default:t(()=>[o(" 編輯 ")]),_:2},1032,["onClick"])]),_:2},1024),l(e(X),{class:"lg:max-w-4xl xl:max-w-5xl 2xl:max-w-7xl"},{default:t(()=>[l(e(H),null,{default:t(()=>[l(e(O),{class:"text-xl"},{default:t(()=>[o("編輯產品")]),_:1}),l(e(R))]),_:1}),l(e(Y),{class:"border h-[500px] lg:h-[800px] p-4"},{default:t(()=>[d("form",null,[d("div",al,[d("div",sl,[d("div",ol,[l(e(u),{class:"text-base",for:"main-product"},{default:t(()=>[o("主要圖片")]),_:1}),l(i,{id:"main-product",modelValue:e(a).imageUrl,"onUpdate:modelValue":s[11]||(s[11]=n=>e(a).imageUrl=n),placeholder:"請輸入圖片"},null,8,["modelValue"]),d("img",{class:"object-cover",src:e(a).imageUrl,alt:""},null,8,dl)]),(_(!0),v(w,null,I(e(a).imagesUrl,(n,c)=>(_(),v("div",{key:c,class:"space-y-4"},[rl,l(e(u),{for:"product-image"+(c+1)},{default:t(()=>[o("圖片網址"+b(c+1),1)]),_:2},1032,["for"]),l(i,{id:"product-image"+(c+1),modelValue:e(a).imagesUrl[c],"onUpdate:modelValue":S=>e(a).imagesUrl[c]=S,placeholder:"請輸入圖片"},null,8,["id","modelValue","onUpdate:modelValue"]),d("img",{class:"object-cover",src:e(a).imagesUrl[c],alt:""},null,8,nl)]))),128)),e(a).imagesUrl[e(a).imagesUrl.length-1]!==""?(_(),v("div",il,[l(m,{variant:"outline-primary",onClick:s[12]||(s[12]=n=>e(a).imagesUrl.push(""))},{default:t(()=>[o(" 新增圖片 ")]),_:1})])):T("",!0),d("div",null,[l(m,{variant:"destructive",class:"w-full",onClick:s[13]||(s[13]=n=>e(a).imagesUrl.pop())},{default:t(()=>[o(" 刪除圖片 ")]),_:1})])]),d("div",ul,[d("div",cl,[l(e(u),{class:"text-base",for:"product-title"},{default:t(()=>[o("標題")]),_:1}),l(i,{id:"product-title",modelValue:e(a).title,"onUpdate:modelValue":s[14]||(s[14]=n=>e(a).title=n),placeholder:"請輸入標題"},null,8,["modelValue"])]),d("div",pl,[l(e(u),{class:"text-base",for:"product-category"},{default:t(()=>[o("分類")]),_:1}),l(i,{id:"product-category",modelValue:e(a).category,"onUpdate:modelValue":s[15]||(s[15]=n=>e(a).category=n),placeholder:"請輸入分類"},null,8,["modelValue"])]),d("div",_l,[l(e(u),{class:"text-base",for:"product-unit"},{default:t(()=>[o("單位")]),_:1}),l(i,{id:"product-unit",modelValue:e(a).unit,"onUpdate:modelValue":s[16]||(s[16]=n=>e(a).unit=n),placeholder:"請輸入單位"},null,8,["modelValue"])]),d("div",ml,[l(e(u),{class:"text-base",for:"product-origin-price"},{default:t(()=>[o("原價")]),_:1}),l(i,{id:"product-origin-price",type:"number",modelValue:e(a).origin_price,"onUpdate:modelValue":s[17]||(s[17]=n=>e(a).origin_price=n),placeholder:"請輸入原價"},null,8,["modelValue"])]),d("div",fl,[l(e(u),{class:"text-base",for:"product-price"},{default:t(()=>[o("價格")]),_:1}),l(i,{id:"product-price",type:"number",modelValue:e(a).price,"onUpdate:modelValue":s[18]||(s[18]=n=>e(a).price=n),placeholder:"請輸入售價"},null,8,["modelValue"])]),d("div",gl,[l(e(u),{class:"text-base",for:"product-description"},{default:t(()=>[o("產品描述")]),_:1}),l(e(M),{id:"product-description",modelValue:e(a).description,"onUpdate:modelValue":s[19]||(s[19]=n=>e(a).description=n),placeholder:"請輸入產品描述"},null,8,["modelValue"])]),d("div",vl,[l(e(u),{class:"text-base",for:"product-content"},{default:t(()=>[o("說明內容")]),_:1}),l(e(M),{id:"product-content",modelValue:e(a).content,"onUpdate:modelValue":s[20]||(s[20]=n=>e(a).content=n),placeholder:"請輸入產品說明內容"},null,8,["modelValue"])]),d("div",yl,[_e(d("input",{id:"product-enabled",type:"checkbox",class:"size-6 me-2","onUpdate:modelValue":s[21]||(s[21]=n=>e(a).is_enabled=n),"true-value":1,"false-value":0},null,512),[[me,e(a).is_enabled]]),l(e(u),{class:"text-base",for:"product-enabled"},{default:t(()=>[o("是否啟用")]),_:1})])]),l(e(G),{class:"lg:col-start-2"},{default:t(()=>[l(e(K),{"as-child":""},{default:t(()=>[l(m,{type:"button",class:"border-lime-700 border bg-transparent text-foreground hover:bg-lime-500 closeButton"},{default:t(()=>[o("取消")]),_:1})]),_:1}),l(m,{type:"button",variant:"outline-primary",onClick:n=>e($)(r.id)},{default:t(()=>[o("確認")]),_:2},1032,["onClick"])]),_:2},1024)])])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(e(he),null,{default:t(()=>[l(e($e),{"as-child":""},{default:t(()=>[l(m,{variant:"destructive"},{default:t(()=>[o("刪除")]),_:1})]),_:1}),l(e(Ue),null,{default:t(()=>[l(e(ke),null,{default:t(()=>[l(e(Ce),null,{default:t(()=>[o("您確定要刪除產品嗎?")]),_:1}),l(e(we),null,{default:t(()=>[o(b(r.title),1)]),_:2},1024)]),_:2},1024),l(e(Pe),null,{default:t(()=>[l(e(Be),{class:"border-lime-700 border bg-transparent text-foreground hover:bg-lime-500 closeButton"},{default:t(()=>[o(" 取消 ")]),_:1}),l(e(qe),{class:"border-destructive border bg-transparent text-foreground hover:bg-destructive closeButton",onClick:n=>e(k)(r.id)},{default:t(()=>[o("確定")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),d("div",bl,[l(e(ve),{total:((x=e(U))==null?void 0:x.total_pages)*10,"sibling-count":1,"show-edges":"","default-page":1},{default:t(({page:r})=>[l(e(fe),{class:"flex items-center gap-1"},{default:t(({items:n})=>[l(e(Se),{onClick:e(p)},null,8,["onClick"]),l(e(je),{onClick:s[22]||(s[22]=c=>e(p)(e(U).current_page-1))}),(_(!0),v(w,null,I(n,(c,S)=>(_(),v(w,null,[c.type==="page"?(_(),q(e(ge),{key:S,value:c.value,"as-child":""},{default:t(()=>[l(m,{class:"w-10 h-10 p-0",variant:c.value===r?"default":"outline",onClick:Vl=>e(p)(c.value)},{default:t(()=>[o(b(c.value),1)]),_:2},1032,["variant","onClick"])]),_:2},1032,["value"])):(_(),q(e(Ae),{key:c.type,index:S},null,8,["index"]))],64))),256)),l(e(Ie),{onClick:s[23]||(s[23]=c=>e(p)(e(U).current_page+1))}),l(e(Me),{onClick:s[24]||(s[24]=c=>e(p)(e(U).total_pages))})]),_:2},1024)]),_:1},8,["total"])])])}}};export{Pl as default};
