import{h as j,a2 as H,i as E,j as I,l as g,ay as $,s as R,o as q,r as z,a as c,c as p,e as B,b as a,w as t,g as e,f as s,F as O,t as C,x as G,v as d,aN as J}from"./index-DBmB9Ing.js";import{_ as K,a as Q,b as w,c as u,d as U,e as i,f as W}from"./TableCaption-4hU9F7Js.js";import{g as X,_ as Z,a as ee,b as ae,c as te,d as se,e as le,f as ne}from"./DialogFooter-CqJhwpUy.js";import{a as S,b as A,c as D,d as N,e as P,f as V,g as Y,h as F,_ as L}from"./AlertDialogCancel-BQQOZ0Hk.js";const{setIsLoading:r}=j(),{toast:v}=H(),M=E("orders",()=>{const b=I([]),_=async()=>{r();const{data:l}=await g.get(`${$.orders}`);console.log(l),b.value=l.orders,r()};return{orders:b,getOrders:_,togglePaidState:async l=>{const f={data:{...l,is_paid:!l.is_paid}},{data:y}=await g.put(`${$.order}/${l.id}`,f);v({title:y.message,description:""}),_()},deleteOrder:async l=>{r();const{data:f}=await g.delete(`${$.order}/${l}`);v({title:f.message,description:""}),_(),r()},deleteAllOrders:async()=>{r();const{data:l}=await g.delete(`${$.orders}/all`);v({title:l.message,description:""}),_(),r()}}}),de={class:"container py-20 lg:py-32"},_e={class:"text-end"},ue={class:"flex flex-col"},fe={__name:"AdminOrdersView",setup(b){const{getOrders:_,togglePaidState:h,deleteOrder:x,deleteAllOrders:k}=M(),{orders:l}=R(M());return q(()=>{_()}),(f,y)=>{const o=z("Button");return c(),p("section",de,[B("div",_e,[a(e(L),null,{default:t(()=>[a(e(S),{"as-child":""},{default:t(()=>{var n;return[a(o,{variant:"destructive",disabled:!((n=e(l))!=null&&n.length)},{default:t(()=>[s("刪除所有訂單")]),_:1},8,["disabled"])]}),_:1}),a(e(A),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(N),null,{default:t(()=>[s("您真的確定要刪除所有訂單嗎?")]),_:1}),a(e(P),{class:"text-destructive"},{default:t(()=>[s(" 此操作無法回復，所有訂單將會被刪除 ")]),_:1})]),_:1}),a(e(V),null,{default:t(()=>[a(e(Y),{class:"border-lime-700 border bg-transparent text-foreground hover:bg-lime-500 closeButton"},{default:t(()=>[s(" 取消 ")]),_:1}),a(e(F),{class:"border-destructive border bg-transparent text-foreground hover:bg-destructive closeButton",onClick:e(k)},{default:t(()=>[s("確定")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),a(e(W),null,{default:t(()=>[a(e(K),null,{default:t(()=>[s("訂單列表")]),_:1}),a(e(Q),null,{default:t(()=>[a(e(w),null,{default:t(()=>[a(e(u),null,{default:t(()=>[s(" 訂單時間 ")]),_:1}),a(e(u),null,{default:t(()=>[s("客戶名稱")]),_:1}),a(e(u),null,{default:t(()=>[s("訂單價格")]),_:1}),a(e(u),null,{default:t(()=>[s("訂單留言")]),_:1}),a(e(u),null,{default:t(()=>[s("付款情況")]),_:1}),a(e(u),{class:"text-right"},{default:t(()=>[s(" 編輯 ")]),_:1})]),_:1})]),_:1}),a(e(U),null,{default:t(()=>[(c(!0),p(O,null,C(e(l),n=>(c(),G(e(w),{key:n.id},{default:t(()=>[a(e(i),{class:"font-medium"},{default:t(()=>[s(d(e(J)(n.create_at*1e3,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024),a(e(i),null,{default:t(()=>[a(e(X),null,{default:t(()=>[a(e(Z),{"as-child":""},{default:t(()=>[a(o,{variant:"ghost"},{default:t(()=>[s(d(n.user.name),1)]),_:2},1024)]),_:2},1024),a(e(ee),null,{default:t(()=>[a(e(ae),null,{default:t(()=>[a(e(te),null,{default:t(()=>[s("客戶詳細資訊")]),_:1}),a(e(se))]),_:1}),B("div",ue,[(c(!0),p(O,null,C(n.user,(m,T)=>(c(),p("span",{key:m.name},d(T)+" / "+d(m),1))),128))]),a(e(le),null,{default:t(()=>[a(e(ne),{"as-child":""},{default:t(()=>[a(o,{variant:"ghost"},{default:t(()=>[s(" 關閉 ")]),_:1})]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024),a(e(i),null,{default:t(()=>[s(d(n.total),1)]),_:2},1024),a(e(i),null,{default:t(()=>[s(d(n.message),1)]),_:2},1024),a(e(i),null,{default:t(()=>[a(o,{variant:"outline-primary",onClick:m=>e(h)(n)},{default:t(()=>[s(d(n.is_paid?"已付款":"尚未付款"),1)]),_:2},1032,["onClick"])]),_:2},1024),a(e(L),null,{default:t(()=>[a(e(S),{"as-child":""},{default:t(()=>[a(o,{variant:"destructive"},{default:t(()=>[s("刪除")]),_:1})]),_:1}),a(e(A),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(N),null,{default:t(()=>[s("您確定要刪除訂單嗎?")]),_:1}),a(e(P))]),_:1}),a(e(V),null,{default:t(()=>[a(e(Y),{class:"border-lime-700 border bg-transparent text-foreground hover:bg-lime-500 closeButton"},{default:t(()=>[s(" 取消 ")]),_:1}),a(e(F),{class:"border-destructive border bg-transparent text-foreground hover:bg-destructive closeButton",onClick:m=>e(x)(n.id)},{default:t(()=>[s("確定")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])}}};export{fe as default};
