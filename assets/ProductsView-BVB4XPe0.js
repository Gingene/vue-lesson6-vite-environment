import{h as V,i as L,j as C,k as N,l as T,p as U,a as r,c as i,m as h,n as v,g as e,q as x,s as D,o as J,r as B,e as u,b as l,w as c,f,F as k,t as w,v as g,X as O,x as P,J as X,U as z}from"./index-NpP1bDLk.js";import{_ as E,a as H,b as I,c as M,d as R}from"./PaginationPrev-DZoI8xGs.js";import"./chevrons-right-Chxtvsiq.js";const{setIsLoading:F}=V(),S=L("product",()=>{const t=C([]),s=C({}),a=C({}),d=C(""),m=async(n=1)=>{F();const{data:_}=await T.get(`${U.products}/?page=${n}`);t.value=_.products,s.value=_.pagination,a.value=Object.groupBy(_.products,({category:y})=>y),F()},$=n=>{console.log(n),d.value=n},j=N(()=>d.value===""?t.value:t.value.filter(({category:n})=>n===d.value));return{products:t,pagination:s,categories:a,filterCondition:d,filterProducts:j,getProducts:m,changeFilterCondition:$}}),A={__name:"Card",props:{class:{type:null,required:!1}},setup(t){const s=t;return(a,d)=>(r(),i("div",{class:v(e(x)("rounded-lg border bg-card text-card-foreground shadow-sm",s.class))},[h(a.$slots,"default")],2))}},G={__name:"CardHeader",props:{class:{type:null,required:!1}},setup(t){const s=t;return(a,d)=>(r(),i("div",{class:v(e(x)("flex flex-col gap-y-1.5 p-6",s.class))},[h(a.$slots,"default")],2))}},K={__name:"CardTitle",props:{class:{type:null,required:!1}},setup(t){const s=t;return(a,d)=>(r(),i("h3",{class:v(e(x)("text-2xl font-semibold leading-none tracking-tight",s.class))},[h(a.$slots,"default")],2))}},Q={__name:"CardDescription",props:{class:{type:null,required:!1}},setup(t){const s=t;return(a,d)=>(r(),i("p",{class:v(e(x)("text-sm text-muted-foreground",s.class))},[h(a.$slots,"default")],2))}},W={__name:"CardContent",props:{class:{type:null,required:!1}},setup(t){const s=t;return(a,d)=>(r(),i("div",{class:v(e(x)("p-6 pt-0",s.class))},[h(a.$slots,"default")],2))}},Y={__name:"CardFooter",props:{class:{type:null,required:!1}},setup(t){const s=t;return(a,d)=>(r(),i("div",{class:v(e(x)("flex items-center p-6 pt-0",s.class))},[h(a.$slots,"default")],2))}},Z={class:"container"},ee={class:"space-y-6 lg:space-y-10"},se=u("h2",null,"產品介紹",-1),te=u("h3",null,"種類",-1),ae={class:"flex flex-wrap gap-2"},le={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6"},ne=["src","alt"],oe={class:"flex justify-between items-center"},re={class:"line-through"},ce={class:"text-through text-lg"},ue={class:"flex justify-center"},fe={__name:"ProductsView",setup(t){const{getProducts:s,changeFilterCondition:a}=S(),{filterProducts:d,pagination:m,categories:$}=D(S());return J(()=>{s()}),(j,n)=>{const _=B("Button"),y=B("router-link");return r(),i("section",Z,[u("main",ee,[se,u("div",null,[te,u("ul",ae,[u("li",null,[l(_,{variant:"ghost",onClick:n[0]||(n[0]=o=>e(a)(""))},{default:c(()=>[f("全部")]),_:1}),f(" |")]),(r(!0),i(k,null,w(Object.keys(e($)),(o,b)=>(r(),i("li",{key:e($)[b]},[l(_,{variant:"ghost",onClick:p=>e(a)(o)},{default:c(()=>[f(g(o),1)]),_:2},1032,["onClick"]),f(" | ")]))),128))])]),u("ul",le,[(r(!0),i(k,null,w(e(d),o=>(r(),i("li",{key:o.id},[l(e(A),null,{default:c(()=>[l(e(G),{class:"md:h-[420px] xl:h-[400px]"},{default:c(()=>[u("img",{src:o.imageUrl,alt:o.title,class:"object-cover h-[300px] md:h-[250px] xl:h-[200px]"},null,8,ne),l(e(K),{class:"py-4"},{default:c(()=>[f(g(o.title),1)]),_:2},1024),l(e(Q),null,{default:c(()=>[f(g(o.description),1)]),_:2},1024)]),_:2},1024),l(e(W),null,{default:c(()=>[u("div",oe,[u("span",re,"原價 每"+g(o.origin_price)+"/"+g(o.unit),1),u("span",ce,[u("strong",null,"促銷價: "+g(o.price),1)])])]),_:2},1024),l(e(Y),{class:"justify-between"},{default:c(()=>[l(_,null,{default:c(()=>[l(y,{to:`/products/${o.id}`},{default:c(()=>[f("查看詳細")]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),u("div",ue,[l(e(z),{total:e(m).total_pages*10,"sibling-count":1,"show-edges":"","default-page":1},{default:c(({page:o})=>[l(e(O),{class:"flex items-center gap-1"},{default:c(({items:b})=>[l(e(E),{onClick:e(s)},null,8,["onClick"]),l(e(H),{onClick:n[1]||(n[1]=p=>e(s)(e(m).current_page-1))}),(r(!0),i(k,null,w(b,(p,q)=>(r(),i(k,null,[p.type==="page"?(r(),P(e(X),{key:q,value:p.value,"as-child":""},{default:c(()=>[l(_,{class:"w-10 h-10 p-0",variant:p.value===o?"default":"outline",onClick:ie=>e(s)(p.value)},{default:c(()=>[f(g(p.value),1)]),_:2},1032,["variant","onClick"])]),_:2},1032,["value"])):(r(),P(e(I),{key:p.type,index:q},null,8,["index"]))],64))),256)),l(e(M),{onClick:n[2]||(n[2]=p=>e(s)(e(m).current_page+1))}),l(e(R),{onClick:n[3]||(n[3]=p=>e(s)(e(m).total_pages))})]),_:2},1024)]),_:1},8,["total"])])])])}}};export{fe as default};
